# 熊媽媽法庭 - 產品設計文檔

**項目名稱**：熊媽媽法庭（Mother Bear Court）  
**品牌定位**：大愛、包容、保護、呵護

> 📝 **本文檔已整合所有深度優化建議，包含完整的產品功能設計、用戶體驗優化、技術架構等詳細內容。**  
> ⚠️ **開發階段說明**：本文檔包含完整功能設計，但MVP階段優先實現快速體驗模式（P0優先級），其他功能後續迭代。詳見[MVP開發計劃](./10-MVP開發計劃.md)、[快速體驗優化說明](./快速體驗優化說明.md)和[技術實現細節補充](./技術實現細節補充.md)。

## 📐 產品架構

### 系統架構圖

```
┌─────────────────────────────────────────────────┐
│              用戶層（前端）                        │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐     │
│  │  Web端   │  │  移動端  │  │  小程序  │     │
│  └──────────┘  └──────────┘  └──────────┘     │
└─────────────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────────────┐
│            API服務層（後端）                       │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐     │
│  │ 用戶服務 │  │ 案件服務 │  │ AI服務   │     │
│  └──────────┘  └──────────┘  └──────────┘     │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐     │
│  │ 判決服務 │  │ 社區服務 │  │ 支付服務 │     │
│  └──────────┘  └──────────┘  └──────────┘     │
└─────────────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────────────┐
│           數據層                                  │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐     │
│  │ 用戶數據 │  │ 案件數據 │  │ 判決數據 │     │
│  └──────────┘  └──────────┘  └──────────┘     │
│  ┌──────────┐  ┌──────────┐                  │
│  │ 案例庫   │  │ 日誌數據 │                  │
│  └──────────┘  └──────────┘                  │
└─────────────────────────────────────────────────┘
```

---

## 🎯 核心功能模塊

### 1. 用戶系統（快速體驗優化版）

#### 1.1 快速體驗模式（新增，優先級最高）⭐️

**核心設計理念**：
- **零門檻進入**：生氣中的用戶需要快速獲得判決，不能讓設置流程成為障礙
- **單人操作**：不需要雙方都註冊，一個用戶可以在同一個介面操作兩個角色
- **即時體驗**：進入後立即可以開始提交案件，無需複雜設置

**快速體驗流程**：
1. **進入首頁** → 直接顯示「立即開始」按鈕
2. **選擇模式**：
   - **快速體驗模式**（推薦）：無需註冊，直接使用
   - **完整模式**：註冊後使用，可保存歷史記錄
3. **單人雙角色介面**：
   - 同一個頁面，左右分屏或上下分屏
   - 左側：角色A（原告）輸入框
   - 右側：角色B（被告）輸入框
   - 雙方可以同時輸入，也可以由同一人代為輸入
   - 標註清楚「角色A」和「角色B」，避免混淆
4. **提交案件** → 直接進入案件提交流程（無需選擇案件類型，AI自動判斷）
5. **獲得判決** → 立即顯示判決結果（含責任分比例）

**快速體驗模式限制**：
- 不保存案件記錄（可選擇保存，需要註冊）
- 不發送郵件通知
- 不支持和好方案生成（可選，需要註冊）
- 不支持執行追蹤（可選，需要註冊）

**引導註冊機制**：
- 判決後提示：「想要保存記錄和獲得更多功能？立即註冊」
- 一鍵註冊：只需郵箱，快速註冊
- 註冊後自動關聯當前案件

#### 1.2 註冊與登錄（完整模式）

**註冊流程**（簡化版，可選）：
1. 郵箱輸入 → 驗證格式
2. 發送驗證郵件 → 6位驗證碼（5分鐘有效）
3. 輸入驗證碼 → 驗證
4. 設置密碼 → 強度檢查（至少8位，包含字母和數字）
5. 完成註冊 → 自動登錄

**登錄方式**：
- 郵箱 + 密碼登錄
- 忘記密碼（郵箱重置）
- **快速登錄**：記住我功能，7天免登錄

**用戶資料**（基礎版）：
- **基本信息**：
  - 暱稱（必填，2-20字符）
  - 頭像（可選，支持上傳或選擇默認）
  - 性別（可選：男/女/其他/不公開）
  - 年齡（可選，18-99）
  - 關係狀態（必填：單身/戀愛中/已婚）
- **偏好設置**：
  - 語言（中文/英文）
  - 時區（自動檢測）
  - 通知設置（郵件/推送）
  - 隱私設置（公開/僅配對/私密）

#### 1.2.1 進階用戶背景設定（完整模式，可選）⭐️

**設計理念**：
- 為已註冊並配對的用戶提供進階功能
- 通過收集雙方背景信息，讓AI能夠更深入從心理學角度分析
- 提供更貼切、更個性化的判決和建議

**個人背景信息**（可選填寫，逐步完善）：
- **教育背景**：
  - 學歷（高中/大專/本科/碩士/博士/其他）
  - 專業領域（可選）
  - 畢業院校（可選）
- **文化背景**：
  - 民族/種族（可選）
  - 文化認同（可選，多選：東方文化/西方文化/混合文化等）
  - 成長環境（城市/鄉村/小鎮等）
- **宗教背景**：
  - 宗教信仰（無/基督教/伊斯蘭教/佛教/印度教/猶太教/其他）
  - 宗教實踐程度（不實踐/偶爾實踐/經常實踐/嚴格實踐）
- **家庭背景**（可選）：
  - 家庭結構（獨生子女/有兄弟姐妹/單親家庭/重組家庭等）
  - 父母關係（和諧/一般/緊張/離異等）
  - 家庭經濟狀況（可選）
- **性格特質**（可選，可通過測試或自評）：
  - MBTI類型（可選）
  - 大五人格特質（開放性/責任心/外向性/宜人性/神經質）
  - 溝通風格（直接/間接/理性/感性等）
- **其他相關信息**：
  - 職業（可選）
  - 興趣愛好（可選，多選）
  - 價值觀重點（可選，多選：家庭/事業/自由/穩定等）

**隱私保護**：
- 所有背景信息默認為私密，僅用於AI分析
- 用戶可選擇是否與配對對象共享部分信息
- 背景信息不會在判決書中直接顯示，僅用於AI分析

#### 1.2.2 關係檔案系統（完整模式，可選）⭐️

**設計理念**：
- 建立完整的關係檔案，記錄雙方關係的重要信息
- 這些信息用於增強判決的準確性和提供更精準的關係修復建議

**關係基本信息**：
- **關係階段**：
  - 在一起多久（天數/月數/年數）
  - 關係狀態（新戀情/穩定關係/長期關係/已婚等）
  - 關係里程碑（第一次約會/第一次旅行/同居/訂婚/結婚等，可選）
- **地理位置**：
  - 雙方所在城市/國家
  - 是否異地（是/否）
  - 異地距離（如適用）
  - 見面頻率（如適用）

**關係歷史記錄**：
- **底線和雷點**（重要）：
  - 角色A的底線（可選，多條）：
    - 例如：「不能接受欺騙」「不能接受冷暴力」「不能接受不尊重家人」等
  - 角色B的底線（可選，多條）：
    - 例如：「不能接受不信任」「不能接受過度控制」等
  - 雙方共同底線（可選）
  - 歷史衝突中的雷點（可選，AI可從歷史案件中提取）
- **喜好和偏好**：
  - 角色A的喜好（可選，多選）：
    - 喜歡的活動、食物、電影類型、音樂風格等
  - 角色B的喜好（可選，多選）
  - 共同喜好（可選）
  - 不喜歡的事物（可選）
- **溝通模式**（可選）：
  - 平時溝通頻率（每天/每週幾次/偶爾等）
  - 溝通方式偏好（文字/語音/視頻/面對面）
  - 衝突時的溝通方式（冷戰/爭吵/理性討論/尋求第三方等）
- **關係優勢**（可選）：
  - 雙方認為關係中的優勢（可選，多選）
  - 例如：「互相理解」「共同興趣」「價值觀一致」等
- **關係挑戰**（可選）：
  - 雙方認為關係中的挑戰（可選，多選）
  - 例如：「溝通不暢」「價值觀差異」「生活習慣不同」等
- **歷史案件記錄**（自動生成）：
  - 過往提交的案件類型分布
  - 過往判決的責任分比例趨勢
  - 過往和好方案的執行情況
  - 關係改善趨勢（可選）

**關係檔案使用方式**：
- **AI分析增強**：
  - 在生成判決時，AI會參考關係檔案中的信息
  - 例如：如果知道雙方的底線，AI會特別注意是否觸及底線
  - 例如：如果知道雙方在一起多久，AI會根據關係階段調整建議
- **個性化建議**：
  - 基於雙方的喜好，推薦更適合的和好方案
  - 基於雙方的溝通模式，提供更貼切的溝通建議
  - 基於雙方的地理位置，推薦適合的活動
- **關係健康監測**（未來功能）：
  - 基於關係檔案，監測關係健康狀況
  - 識別潛在衝突點
  - 提供預防性建議

**關係檔案填寫方式**：
- **引導式填寫**：
  - 配對成功後，引導雙方逐步完善關係檔案
  - 分階段填寫，不強制一次性完成
  - 可隨時更新和修改
- **智能提取**：
  - 從歷史案件中自動提取信息（如底線、雷點）
  - 從判決結果中提取關係特徵
  - 用戶確認後保存
- **雙方協同**：
  - 某些信息需要雙方共同確認（如關係階段、共同底線）
  - 某些信息可以各自填寫（如個人喜好）

#### 1.3 情侶配對系統（完整模式，可選）

**配對方式**（完整模式下可選，快速體驗模式不需要）：
- **邀請碼配對**：
  - 一方生成邀請碼（6位字母數字組合，如：ABC123）
  - 另一方輸入邀請碼
  - 邀請碼有效期：24小時
  - 一次性使用（使用後失效）
  - 防暴力破解：5次錯誤後鎖定30分鐘

**配對確認機制**：
- 雙方都確認後才建立配對
- 配對後24小時內可取消（冷靜期）
- 配對記錄永久保存（用於數據分析）

**關係管理**：
- 查看關係狀態
- 解除關係（需雙方確認或單方申請後7天自動解除）

**注意**：快速體驗模式不需要配對，直接使用單人雙角色介面即可

**進階功能說明**：
- 只有雙方都註冊並配對成功後，才能使用進階功能
- 進階功能包括：背景設定、關係檔案、個性化判決、精準和好方案等
- 快速體驗模式用戶可通過註冊和配對來解鎖這些功能

#### 1.3 審理模式選擇系統
- **模式介紹**：用戶可根據實際情況選擇適合的審理模式
- **模式類型**：
  - **協同審理模式**（面對面模式）：
    - 適用場景：雙方在同一地點，可面對面溝通
    - 特點：同一介面操作，實時同步，增強互動體驗
    - 技術實現：WebSocket實時同步，分屏顯示雙方操作
    - 交互設計：左右分屏或上下分屏，雙方可同時查看和操作
  - **遠程審理模式**（異地戀模式）：
    - 適用場景：異地戀、暫時分開、需要獨立思考空間
    - 特點：各自介面操作，數據實時同步，保持流程一致
    - 技術實現：服務器端狀態同步，推送通知提醒
    - 交互設計：獨立介面，進度同步顯示，對方操作實時提醒
- **模式切換**：案件創建時選擇，審理過程中不可切換
- **模式推薦**：根據用戶地理位置、歷史使用習慣智能推薦

---

### 2. 案件提交系統（快速體驗優化版）

#### 2.1 案件創建流程（極簡版）⭐️

**核心優化**：
- **AI自動判斷案件類型**：用戶不需要手動選擇，AI根據雙方陳述自動識別
- **單人雙角色介面**：同一個頁面，兩個輸入框，可以同時輸入或分別輸入
- **極簡流程**：直接填寫 → 提交 → 獲得判決

**步驟1：填寫雙方陳述**（單人雙角色介面）

**介面設計**：
- **左右分屏**或**上下分屏**：
  - 左側/上方：角色A（原告）輸入區域
  - 右側/下方：角色B（被告）輸入區域
  - 中間：母熊法官形象，提示「請雙方分別填寫陳述」
- **輸入框設計**：
  - 標題：「角色A的陳述」/「角色B的陳述」
  - 引導文字：「發生了什麼事？你的感受是什麼？你希望對方怎麼做？」
  - 字數要求：最少50字，最多2000字
  - 實時字數統計
  - 支持Markdown格式（可選）
- **提交按鈕**：
  - 雙方都填寫完成後，顯示「提交案件」按鈕
  - 如果只有一方填寫，顯示「等待對方填寫」或「我可以代為填寫」（快速體驗模式）

**步驟2：上傳證據**（可選，快速體驗模式可跳過）
- 格式：JPG、PNG、GIF（圖片），MP4（視頻）
- 大小：單個文件不超過5MB
- 數量：最多3張圖片或1個視頻

**步驟3：AI自動分析**（後台自動執行）
- **AI自動判斷案件類型**：
  - 基於雙方陳述內容，使用NLP模型自動識別案件類型
  - 不需要用戶手動選擇
  - 識別結果顯示在判決書中（可選，用戶可查看）
- **提交案件**：
  - 點擊「提交案件」按鈕
  - 顯示「AI正在分析中...」進度提示
  - 預計等待時間：30-60秒

**步驟4：獲得判決**（核心流程結束）
- 立即顯示判決結果
- 包含：問題分析、判決結果、責任分比例、具體建議
- 可選擇是否生成和好方案（可選，需要註冊）
- 可選擇是否保存記錄（可選，需要註冊）

**核心流程結束**：到這裡，用戶已經獲得判決，核心價值已實現。

**可選後續流程**（不強制，用戶可選擇）：
- 和好方案生成（可選）
- 執行追蹤（可選）
- 保存記錄（可選，需要註冊）

- **原告方**（發起方）：
  - **案件標題**（必填，簡要描述）
  - **詳細陳述**（必填，50-2000字）：
    - 引導問題：
      - "發生了什麼事？"（事實描述）
      - "你的感受是什麼？"（情感表達）
      - "你希望對方怎麼做？"（期望表達）
      - "這個問題對你的影響是什麼？"（影響描述）
    - 格式支持：Markdown格式、段落分隔、重點標註
    - 實時字數統計
  - **上傳證據**（可選，最多3張圖片或1個視頻）：
    - 格式：JPG、PNG、GIF（圖片），MP4（視頻）
    - 大小：單個文件不超過5MB
    - 尺寸：圖片自動壓縮到最大1920x1080
    - 隱私保護：自動檢測敏感信息，提供手動遮擋工具
    - 上傳體驗：拖拽上傳、進度顯示、失敗重試
  - **期望結果**（可選，希望獲得什麼判決）

- **被告方**（被邀請方）：
  - 收到郵件通知後登錄
  - 查看原告陳述和證據
  - 填寫答辯狀（可選，50-2000字，同樣的引導問題）
  - 上傳反證（可選，最多3張圖片或1個視頻）

**步驟3：選擇審理模式**
- **協同審理模式**（面對面）：
  - 適合雙方在同一地點使用
  - 同一介面，實時協同操作
  - 增強互動和溝通體驗
- **遠程審理模式**（異地）：
  - 適合異地戀或需要獨立空間
  - 各自介面，數據實時同步
  - 保持流程一致性

**步驟4：確認提交**
- 雙方確認信息無誤
- 選擇審理方式（AI判決 / 社區投票 / 專業法官）
- 提交案件

#### 2.2 證據管理（優化版）

**文件驗證**：
- 格式：JPG、PNG、GIF（圖片），MP4（視頻）
- 大小：單個文件不超過5MB
- 數量：最多3張圖片或1個視頻
- 尺寸：圖片自動壓縮到最大1920x1080

**隱私保護**：
- 自動檢測敏感信息（電話、身份證、地址）
- 提供手動遮擋工具
- 上傳前預覽

**上傳體驗**：
- 拖拽上傳
- 進度顯示
- 上傳失敗重試
- 支持刪除和替換

**證據標註**：
- 用戶可標註重點證據
- 支持文字說明

---

### 3. 法庭審理系統

#### 3.1 審理流程設計

```
開庭準備
    ↓
雙方陳述（原告 → 被告）
    ↓
證據展示
    ↓
辯護環節（雙方補充）
    ↓
AI分析與判決生成
    ↓
判決書發布
    ↓
和好方案生成（新增）⭐️
    ↓
執行監督（可選）
```

#### 3.2 審理界面設計

**協同審理模式界面**（面對面，MVP階段暫不實現）：
- **分屏布局**：
  - 左右分屏：左側原告，右側被告
  - 或上下分屏：上方原告，下方被告
  - 中間顯示母熊法官（懷抱姿勢）和進度
- **實時同步**：WebSocket實時同步（未來實現）
- **實時同步**：
  - 雙方操作實時同步顯示
  - 一方查看證據時，另一方可見提示
  - 支持語音/文字實時溝通（可選）
- **互動元素**：
  - 雙方可同時點擊、查看
  - 動畫效果同步播放
  - 進度條實時更新

**遠程審理模式界面**（異地，MVP階段實現）：
- **獨立布局**：
  - 單人完整介面
  - 顯示對方當前狀態（「對方正在填寫陳述」等）
  - 進度同步顯示
- **同步機制**（MVP階段簡化）：
  - 簡單輪詢機制（每5秒查詢一次）
  - 對方完成操作時推送通知（郵件）
  - 進度條顯示雙方完成情況
  - 支持查看對方已提交內容（按流程解鎖）
- **等待優化內容**：
  - **推薦案例**：相似案例推薦、熱門案例推薦、成功案例推薦
  - **關係技巧文章**：溝通技巧、衝突解決技巧、關係維護技巧
  - **互動小遊戲**：關係測試題、性格測試、關係健康自測
  - **進度顯示**：當前階段顯示、預計等待時間、對方操作狀態

**共同視覺元素**：
- 法庭場景背景（卡通風格，溫暖色調）
- 母熊法官動畫（懷抱姿勢，根據案件類型選擇不同表情）
- 雙方角色形象（可自定義）
- 進度條顯示審理進度

**判決書閱讀體驗優化**：
- **判決書摘要**：
  - 關鍵信息提取：核心問題（1句話）、判決結果（1句話）、關鍵建議（3-5條）
  - 視覺化展示：卡片式設計、重點標註、圖標輔助
- **判決書導讀**：
  - 章節導航：問題分析、判決結果、具體建議、關係修復建議
  - 重點標註：關鍵句子高亮、重要建議標記、可收藏重點內容
- **互動功能**：
  - 語音播放：支持語音閱讀、可調節語速、可暫停/繼續
  - 分享功能：分享給朋友（匿名）、分享到社交媒體、生成分享圖片
  - 收藏功能：收藏判決書、收藏重點建議、創建個人收藏夾

**共同交互設計**：
- 點擊查看詳細陳述
- 滑動查看證據
- 動畫效果增強沉浸感
- 背景音樂（可開關）

#### 3.3 判決生成機制（優化版）

**Prompt模板設計**：
```
角色設定：
你是一位溫暖、公正的母熊法官，你的使命是保護和呵護每一對情侶。
即使是在法庭，你也會用大愛、包容、保護的方式幫助他們解決衝突。

任務：
基於以下案件信息，生成一份溫暖、公正、實用的判決書。

案件信息：
- 案件類型：[類型]
- 原告陳述：[陳述]
- 被告陳述：[陳述]
- 證據：[證據描述]

判決書要求：
1. 問題分析（200-300字）：
   - 識別核心問題
   - 分析雙方立場
   - 理解雙方需求

2. 判決結果（100-200字）：
   - 明確判決（支持原告/支持被告/雙方各承擔責任）
   - **責任分比例**（新增）⭐️：
     - 以百分比形式明確雙方責任（如：原告60%，被告40%）
     - 或明確責任等級（如：原告主要責任，被告次要責任）
     - 視覺化展示：進度條或圓餅圖顯示責任比例
     - 說明責任分配的理由
   - 簡要說明理由
   - 強調理解和包容

3. 具體建議（300-500字）：
   - 提供3-5條具體行動建議
   - 每條建議要可執行
   - 建議要溫暖、實用

4. 關係修復建議（200-300字）：
   - 如何修復關係
   - 如何重建信任
   - 如何預防類似衝突

語言風格：
- 溫暖、親和
- 專業但不冷漠
- 鼓勵而非指責
- 體現「保護和呵護」的理念

輸出格式：Markdown格式
```

**判決書格式標準化**：
```markdown
# 判決書

## 📋 案件信息
- **案件類型**：[類型]
- **提交時間**：[時間]
- **判決時間**：[時間]

## 🔍 問題分析
[200-300字的問題分析]

## ⚖️ 判決結果

**責任分比例**：
- 角色A（原告）：[X]% 責任
- 角色B（被告）：[Y]% 責任
- 視覺化展示：[進度條或圓餅圖]

**判決說明**：
[100-200字的判決結果，包含責任分配理由]

## 💡 具體建議
1. [建議1]
2. [建議2]
3. [建議3]
...

## 💝 關係修復建議
[200-300字的關係修復建議]

---
*本判決由AI生成，僅供參考。如有嚴重問題，建議尋求專業幫助。*
```

**個性化機制**：
- **基於案件類型**：不同類型使用不同的語言風格
- **基於衝突嚴重程度**：嚴重衝突使用更溫和的語言
- **基於關係階段**：新戀情 vs 長期關係使用不同建議

**AI服務優化**：
- **錯誤處理**：API調用失敗時重試（最多3次，指數退避）
- **成本控制**：
  - 每日限額：設置每日API調用上限
  - 用戶限額：免費用戶每日3次
  - Token限制：控制Prompt和Response長度
- **緩存機制**：
  - 相似案件使用緩存判決
  - 緩存時間：24小時
  - 緩存鍵：案件類型 + 關鍵詞

---

### 4. 判決執行系統

#### 4.1 執行確認
- 雙方確認是否接受判決
- 如有一方不接受，可申請重新審理
- 雙方都接受後，進入執行階段

#### 4.2 和好方案生成系統（新增）⭐️⭐️⭐️⭐️⭐️

**功能定位**：
- 判決後自動生成和好方案，促進雙方互動和關係修復
- 體現「大愛、包容、保護、呵護」的品牌定位
- 從「判決」轉向「和好」，從「對立」轉向「合作」

**觸發時機**：
- 雙方都接受判決後
- 可選擇是否生成和好方案
- 支持多次生成不同方案

**方案生成機制**（優化版）：
- **AI分析**：
  - 分析判決內容和雙方立場
  - 識別衝突根源和情感需求
  - 匹配相似案例的和好方案
- **個性化生成**：
  - **基於案件類型匹配**：
    - 生活習慣衝突 → 習慣養成活動
    - 價值觀衝突 → 理解尊重活動
    - 情感需求衝突 → 親密互動活動
  - **基於關係階段匹配**：
    - 新戀情（<6個月）→ 建立親密感活動
    - 穩定關係（6個月-2年）→ 維護關係活動
    - 長期關係（>2年）→ 深化關係活動
  - **基於執行能力匹配**：
    - 根據歷史執行情況
    - 根據用戶反饋
    - 動態調整難度

**方案模板庫擴展**（20+模板）：
- **日常活動**（10個）：
  - 一起做飯、看電影、散步、購物、運動、閱讀、遊戲、旅行、約會、聊天
- **特殊活動**（5個）：
  - 重溫回憶、嘗試新體驗、慶祝紀念日、驚喜活動、深度對話
- **溝通練習**（5個）：
  - 「我」語句練習、傾聽練習、共情練習、衝突解決練習、情感表達練習

**執行難度評估機制**：
- **評估維度**：
  - 時間成本（1-5分）
  - 金錢成本（1-5分）
  - 情感成本（1-5分）
  - 技能要求（1-5分）
- **難度分級**：
  - 簡單（總分4-8）：1-2天可完成
  - 中等（總分9-12）：3-7天可完成
  - 困難（總分13-20）：1-4週可完成
- **智能推薦**：
  - 優先推薦簡單方案
  - 逐步推薦中等和困難方案
  - 根據執行情況調整推薦

**和好方案內容**：

**1. 互動活動建議**：
- **共同活動**：
  - 一起做飯、看電影、散步等日常活動
  - 根據雙方興趣推薦活動
  - 提供活動時間和地點建議
- **溝通練習**：
  - 結構化溝通練習
  - 情感表達練習
  - 傾聽練習
- **親密互動**：
  - 擁抱、親吻等親密動作建議
  - 根據關係階段調整建議
  - 提供互動時機建議

**2. 關係修復計劃**：
- **短期計劃**（1-3天）：
  - 立即可以執行的和好行動
  - 快速緩解緊張關係
  - 重建信任和親密感
- **中期計劃**（1-2週）：
  - 持續的關係改善行動
  - 建立新的互動模式
  - 鞏固和好成果
- **長期計劃**（1-3個月）：
  - 深層關係改善
  - 預防類似衝突
  - 建立健康的關係模式

**3. 具體互動建議**：
- **對話建議**：
  - 提供開場白建議
  - 提供話題建議
  - 提供表達方式建議
- **行動建議**：
  - 具體的行動步驟
  - 行動時機建議
  - 行動注意事項
- **禮物建議**（可選）：
  - 小禮物建議
  - 驚喜建議
  - 紀念活動建議

**4. 情感修復建議**：
- **情感表達**：
  - 如何表達歉意（如需要）
  - 如何表達理解
  - 如何表達愛意
- **情感接收**：
  - 如何接收對方的表達
  - 如何回應對方的善意
  - 如何建立情感連接

**方案呈現方式**（優化版）：
- **視覺化呈現**：
  - 卡片式設計，每張卡片一個建議
  - 配圖和插畫增強視覺效果
  - 母熊法官形象引導
  - 難度標識（簡單/中等/困難）
  - 時間標識（短期/中期/長期）
- **互動式呈現**：
  - **智能推薦**：
    - 推薦算法：基於案件類型、關係階段、執行能力、歷史數據
    - 推薦展示：「最適合你」標籤、推薦理由說明、優先展示推薦方案
  - **方案對比**：
    - 對比維度：時間成本、難度等級、預期效果、適合場景
    - 對比展示：並排對比、差異標註、推薦標記
  - **方案預覽**：
    - 預覽內容：執行步驟預覽、預期效果預覽、注意事項預覽
    - 預覽方式：彈窗預覽、側邊欄預覽、全屏預覽
  - **方案收藏**：
    - 收藏管理：收藏喜歡的方案、創建收藏夾、標記收藏原因
    - 收藏使用：快速查看收藏、分享收藏方案、執行收藏方案
  - 雙方可以選擇喜歡的方案
  - 可以自定義和調整方案
  - 可以標記完成狀態
- **分階段呈現**：
  - 按時間階段呈現（短期、中期、長期）
  - 按優先級呈現（最重要、次重要）
  - 按難度呈現（簡單、中等、困難）

**方案執行追蹤**：
- **執行打卡**：
  - 雙方可以打卡記錄執行情況
  - 記錄執行時間和感受
  - 分享執行照片或文字
- **執行反饋**：
  - 定期詢問執行情況
  - 收集執行反饋
  - 根據反饋調整方案
- **執行獎勵**：
  - 完成和好方案獲得獎勵
  - 積分、徽章、成就系統
  - 關係健康分數提升

**方案優化機制**：
- **用戶反饋**：
  - 收集用戶對方案的評價
  - 識別有效和無效方案
  - 持續優化方案生成
- **數據分析**：
  - 分析方案執行效果
  - 識別高成功率方案
  - 優化方案推薦算法
- **A/B測試**：
  - 測試不同方案類型
  - 測試不同呈現方式
  - 優化用戶體驗

#### 4.3 執行追蹤（優化版）

**執行確認**：
- 雙方確認是否接受判決
- 如有一方不接受，可申請重新審理
- 雙方都接受後，進入執行階段

**和好方案執行**：
- 選擇和好方案（智能推薦、方案對比、方案預覽）
- 確認執行計劃
- 開始執行

**執行打卡**（優化版）：
- **打卡內容**：
  - 執行時間
  - 執行內容
  - 執行感受
  - 執行照片或文字（可選）
- **打卡方式**：
  - 雙方獨立打卡
  - 自動提醒打卡（每天一次，可設置）
- **執行反饋**：
  - 收集執行反饋
  - 分析執行效果
  - 調整執行方案（如需要）

**執行支持機制**（新增）：
- **執行提醒**：
  - 智能提醒系統（根據執行進度調整提醒頻率）
  - 多種提醒方式（郵件、推送通知）
- **執行指導**：
  - 提供詳細執行步驟
  - 提供執行技巧
  - 提供執行注意事項
- **執行失敗處理**（新增）：
  - 執行失敗後的替代方案
  - 降低難度重新推薦
  - 提供鼓勵和支持

#### 4.4 後續跟進
- 7天後自動詢問：問題是否真正解決、和好方案執行情況
- 30天後回訪：關係改善情況、和好方案效果
- 數據統計：為用戶提供關係健康報告

---

### 5. 社區與案例庫

#### 5.1 案例庫系統
- **公開案例**：用戶可選擇匿名分享案例
- **案例分類**：按類型、標籤、熱度分類
- **案例搜索**：關鍵詞搜索、相似案例推薦
- **案例詳情**：查看完整判決書（隱私信息已脫敏）

#### 5.2 社區功能
- **討論區**：用戶可討論案例、分享經驗
- **專家專欄**：邀請心理學家、情感諮詢師撰文
- **投票功能**：對公開案例進行投票判決
- **用戶評級**：活躍用戶可成為「陪審員」

---

### 6. 增值服務

#### 6.1 專業法官服務
- 邀請真實的專業人士（律師、心理諮詢師）進行判決
- 付費服務，提供更專業的分析和建議

#### 6.2 關係諮詢服務
- 一對一情感諮詢
- 關係評估報告
- 個性化改善建議

#### 6.3 會員服務
- **免費版**：每月3次AI判決
- **會員版**（月費/年費）：
  - 無限次AI判決
  - 優先使用專業法官服務
  - 專屬母熊法官形象（多種懷抱姿勢和表情）
  - 關係健康報告
  - 無廣告體驗

---

### 7. 關係健康監測系統（新增）

#### 7.1 健康評估
- **定期問卷**：每週/每月自動發送關係健康問卷
- **健康評分**：0-100分，多維度評估（溝通、信任、親密、衝突處理等）
- **趨勢分析**：展示關係健康趨勢圖，識別問題
- **問題預警**：健康分數低於閾值時自動預警

#### 7.2 衝突預警
- **數據分析**：基於聊天記錄、互動頻率等數據分析
- **潛在衝突識別**：AI識別潛在衝突點
- **預防建議**：提前提供預防性建議
- **主動推送**：推送相關溝通技巧和案例

#### 7.3 溝通練習
- **技巧課程**：提供溝通技巧在線課程
- **場景模擬**：模擬常見溝通場景進行練習
- **效果評估**：評估溝通練習效果
- **個性化建議**：基於練習結果提供改進建議

---

### 8. 緊急情況處理系統（新增）

#### 8.1 緊急求助
- **高危內容識別**：AI自動識別家暴、自殺傾向等高危內容
- **自動轉介**：自動觸發專業機構轉介（心理諮詢、法律援助等）
- **緊急聯繫**：提供24小時緊急聯繫方式
- **隱私保護**：在保護隱私的前提下提供幫助

#### 8.2 安全模式
- **敏感信息隱藏**：自動隱藏敏感個人信息
- **功能限制**：限制某些可能帶來風險的功能
- **安全建議**：提供安全使用建議
- **匿名使用**：支持完全匿名使用

#### 8.3 專業轉介機制
- **合作機構**：與心理諮詢機構、法律機構建立合作
- **轉介流程**：標準化的轉介流程
- **跟蹤服務**：轉介後的跟蹤服務
- **資源庫**：建立專業資源庫供用戶查詢

---

### 9. 審理模式優化（增強）

#### 9.1 協同審理模式優化
- **協同引導**：首次使用時提供協同操作引導
- **操作衝突處理**：
  - 檢測雙方同時操作同一元素
  - 採用「最後寫入獲勝」或「操作合併」策略
  - 提供操作衝突提示
- **實時溝通**（可選）：
  - 支持語音/視頻通話
  - 支持文字實時聊天
  - 可隨時開啟/關閉
- **協同動畫**：增強協同感的視覺效果和動畫

#### 9.2 遠程審理模式優化
- **等待優化**：
  - 等待時推薦相關案例和內容
  - 提供關係技巧學習
  - 顯示預計等待時間
- **進度可視化**：
  - 清晰的進度條顯示雙方完成情況
  - 階段性進度提示
  - 完成時間預測
- **智能提醒**：
  - 對方完成操作時推送通知
  - 超時未操作時提醒
  - 重要節點提醒
- **異步溝通**：
  - 支持異步留言和回覆
  - 支持標註重點內容
  - 支持添加備註

#### 9.3 網絡異常處理
- **斷線檢測**：自動檢測網絡斷線
- **斷線重連**：自動重連機制
- **狀態恢復**：斷線重連後自動恢復狀態
- **數據同步**：確保數據不丟失

---

### 10. 判決機制優化（增強）

#### 10.1 多樣化判決方式
- **AI判決**：標準AI判決（快速、低成本）
- **混合判決**：AI初步分析 + 用戶投票 + 專家覆核（平衡效率和專業性）
- **專業判決**：專業人士判決（高質量、高成本）
- **快速判決**：簡單案件快速處理（5分鐘內完成）

#### 10.2 分階段審理
- **適用場景**：複雜案件可分期審理
- **階段劃分**：將複雜案件分為多個階段
- **階段總結**：每個階段結束後提供總結
- **最終判決**：所有階段完成後提供最終判決

#### 10.3 調解機制
- **調解選項**：判決前提供調解機會
- **調解流程**：結構化的調解流程
- **調解工具**：提供調解工具和模板
- **調解記錄**：記錄調解過程和結果

---

### 11. 執行追蹤優化（增強）

#### 11.1 執行契約
- **契約簽署**：雙方簽署執行協議
- **契約內容**：明確執行內容、時間、標準
- **契約提醒**：定期提醒執行契約內容
- **契約完成**：完成後確認和慶祝

#### 11.2 執行激勵
- **執行打卡**：完成執行任務後打卡
- **執行獎勵**：完成執行獲得積分和獎勵
- **執行排行榜**：展示執行完成情況（可選）
- **執行成就**：完成執行獲得成就徽章

#### 11.3 執行失敗處理
- **失敗識別**：識別執行失敗的情況
- **原因分析**：分析執行失敗的原因
- **重新審理**：可申請重新審理
- **調整計劃**：根據情況調整執行計劃

---

## 🎨 用戶體驗設計

### 視覺設計規範

#### 色彩方案
- **主色調**：
  - 溫暖橘（#FF8C42）：代表溫暖、親和
  - 柔和藍（#5B9BD5）：代表理性、公正
  - 純淨白（#FFFFFF）：代表純潔、中立
- **輔助色**：
  - 成功綠（#52C41A）：判決成功、執行完成
  - 警告黃（#FAAD14）：提醒、注意事項
  - 錯誤紅（#FF4D4F）：拒絕、錯誤操作

#### 字體規範
- **標題字體**：思源黑體 Bold / PingFang SC Bold
- **正文字體**：思源黑體 Regular / PingFang SC Regular
- **字號規範**：
  - 大標題：24-32px
  - 小標題：18-20px
  - 正文：14-16px
  - 輔助文字：12px

#### 圖標與插畫（優化版）
- **風格**：扁平化、圓潤、親和、溫暖
- **母熊法官形象**：
  - 懷抱姿勢（象徵保護和呵護）
  - 溫柔但堅定的表情
  - 多種風格（嚴肅但溫暖、溫和親和、幽默輕鬆）
- **場景插畫**：法庭場景（溫暖色調）、日常生活場景
- **微交互設計**（新增）：
  - 按鈕交互：點擊反饋（視覺和觸覺）、加載狀態、錯誤處理
  - 動畫設計：過渡動畫、狀態動畫、反饋動畫
  - 手勢交互：滑動查看內容、長按顯示選項、雙擊快速操作

### 交互設計原則

1. **簡潔明了**：流程清晰，操作簡單
2. **反饋及時**：每個操作都有明確反饋
3. **情感化設計**：使用動畫、音效增強體驗
4. **個性化**：允許用戶自定義角色形象
5. **無障礙設計**：考慮不同用戶群體的使用習慣

---

## 📱 技術架構設計

### 前端技術棧
- **Web端**：React + TypeScript + Ant Design
- **移動端**：React Native / Flutter
- **小程序**：微信小程序原生開發

### 後端技術棧
- **API服務**：Node.js / Python (FastAPI)
- **數據庫**：
  - 關係型數據庫：PostgreSQL（用戶、案件數據）
  - 文檔數據庫：MongoDB（判決書、案例庫）
  - 緩存：Redis（會話、熱點數據、實時狀態）
- **實時通信**：
  - **協同審理模式**：WebSocket服務（Socket.io / WebSocket）
    - 消息協議：JSON格式，包含消息類型、時間戳、用戶ID、操作內容
    - 狀態同步：操作衝突檢測和解決（最後寫入獲勝/操作合併）
    - 斷線重連：心跳檢測（30秒間隔）、自動重連、狀態恢復
    - 消息隊列：RabbitMQ處理高並發消息
  - **遠程審理模式**：服務器端狀態管理 + 推送通知
    - 狀態管理：Redis存儲案件狀態，版本控制
    - 推送通知：Firebase Cloud Messaging / 極光推送
    - 狀態同步：輪詢或WebSocket長連接
- **AI服務**：
  - **文本分析模型**：
    - 情感分析：基於BERT的情感分類模型
    - 關鍵信息提取：NER模型提取人物、事件、時間、地點
    - 意圖識別：分類模型識別需求、抱怨、請求等
    - 語義理解：GPT模型理解深層含義
  - **案例匹配算法**：
    - 文本相似度：基於BERT的語義相似度計算
    - 衝突類型匹配：基於分類模型
    - 用戶畫像匹配：基於協同過濾
    - 判決結果匹配：基於判決結果相似度
  - **判決生成模型**：
    - 規則推理：基於預設規則的邏輯推理
    - 案例學習：基於歷史案例的判決生成
    - 深度學習：基於GPT的判決書生成
    - 多模型融合：結合多種模型的優勢
  - **圖像識別**：用於證據處理（OCR、敏感信息識別）
- **文件存儲**：OSS（阿里雲/騰訊雲）
- **數據分析**：
  - 數據採集：Flume / Logstash
  - 數據倉庫：Hadoop / Spark
  - 實時分析：Kafka + Flink
  - 數據可視化：Grafana / Tableau

### 基礎設施
- **CDN**：加速靜態資源訪問（阿里雲CDN / 騰訊雲CDN）
- **負載均衡**：
  - 應用層負載均衡：Nginx / HAProxy
  - 數據庫負載均衡：讀寫分離、主從複製
  - 微服務負載均衡：服務網格（Istio）
- **擴展性設計**：
  - 微服務架構：服務拆分、獨立部署
  - 水平擴展：容器化部署（Docker / Kubernetes）
  - 數據庫分片：按用戶ID或案件ID分片
  - 緩存策略：多級緩存（本地緩存 + Redis + CDN）
- **監控系統**：
  - 日誌系統：ELK Stack（Elasticsearch + Logstash + Kibana）
  - 性能監控：Prometheus + Grafana
  - 應用監控：APM工具（New Relic / Datadog）
  - 錯誤追蹤：Sentry
- **安全防護**：
  - 防DDoS：雲服務商DDoS防護
  - 數據加密：傳輸加密（HTTPS/TLS）、存儲加密（AES-256）
  - 訪問控制：JWT認證、RBAC權限控制
  - 安全審計：定期安全審計和漏洞掃描

---

## 🔒 隱私與安全

### 數據隱私保護
- **數據加密**：敏感數據加密存儲
- **匿名化處理**：公開案例自動脫敏
- **權限控制**：嚴格的數據訪問權限
- **用戶控制**：用戶可隨時刪除數據

### 內容安全
- **內容審核**：AI + 人工審核用戶提交內容
- **敏感詞過濾**：自動過濾不當內容
- **舉報機制**：用戶可舉報不良內容
- **黑名單系統**：違規用戶封禁機制

---

## 📊 數據指標

### 產品指標
- **用戶指標**：DAU、MAU、留存率、活躍度
- **功能指標**：案件提交量、判決完成率、執行率
- **質量指標**：判決滿意度、問題解決率

### 商業指標
- **付費轉化**：免費轉付費轉化率
- **ARPU**：每用戶平均收入
- **LTV**：用戶生命周期價值
- **CAC**：獲客成本

---

**文檔版本**：v1.0  
**創建日期**：2024年  
**最後更新**：2024年

