# 熊媽媽法庭 - 後端設計文檔

**項目名稱**：熊媽媽法庭（Mother Bear Court）  
**品牌定位**：大愛、包容、保護、呵護  
**文檔版本**：v1.0  
**最後更新**：2024年

---

## 📚 文檔導航

本後端設計文檔分為以下幾個部分，請按順序閱讀：

### 核心文檔

1. **[後端架構設計](./01-後端架構設計.md)** ⭐️ **必讀**
   - 系統架構概述
   - 技術棧選型
   - 項目結構
   - 設計原則

2. **[數據庫設計](./02-數據庫設計.md)** ⭐️ **必讀**
   - 數據庫選型
   - 表結構設計
   - 索引設計
   - 數據遷移策略

3. **[API設計](./03-API設計.md)** ⭐️ **必讀**
   - RESTful API規範
   - 接口定義
   - 請求/響應格式
   - 錯誤處理

4. **[服務層設計](./04-服務層設計.md)** ⭐️ **必讀**
   - 業務邏輯劃分
   - 服務接口定義
   - 依賴注入
   - 事務管理

5. **[中間件和安全](./05-中間件和安全.md)**
   - 認證授權
   - 請求驗證
   - 錯誤處理中間件
   - 安全防護

6. **[AI服務集成](./06-AI服務集成.md)**
   - OpenAI API集成
   - Prompt設計
   - 錯誤處理和重試
   - 成本控制

7. **[其他服務設計](./07-其他服務設計.md)**
   - 文件存儲服務
   - 郵件服務
   - 定時任務
   - Session管理（快速體驗模式）
   - 日誌服務

11. **[測試策略](./10-測試策略.md)**
    - 單元測試
    - 集成測試
    - 測試覆蓋率

12. **[部署和運維](./11-部署和運維.md)**
    - 環境配置
    - 部署流程
    - 監控和日誌
    - 性能優化

13. **[接口建設規範](./12-接口建設規範.md)** ⭐️ **必讀**
    - 設計原則和命名規範
    - 請求/響應規範
    - 錯誤處理規範
    - 版本控制規範
    - 安全和性能規範
    - 文檔和測試規範
    - 開發流程和代碼審查標準

---

## 🎯 設計目標

### 核心原則

1. **簡單優先**：MVP階段保持簡單，避免過度設計
2. **可擴展性**：為未來擴展預留空間
3. **安全性**：數據加密、輸入驗證、SQL注入防護
4. **性能**：響應快速、資源高效
5. **可維護性**：代碼清晰、文檔完整

### 技術選型

- **運行時**：Node.js 18+
- **框架**：Express.js
- **語言**：TypeScript
- **數據庫**：PostgreSQL（Supabase免費版）
- **ORM**：Prisma（推薦）或原生SQL
- **認證**：JWT
- **AI服務**：OpenAI API（GPT-3.5-turbo）
- **文件存儲**：本地（開發）→ Cloudinary（生產）
- **郵件服務**：SendGrid（免費額度）

---

## 📋 快速開始

### 閱讀順序

1. 先閱讀 [後端架構設計](./01-後端架構設計.md) 了解整體架構
2. 閱讀 [數據庫設計](./02-數據庫設計.md) 了解數據結構
3. 閱讀 [API設計](./03-API設計.md) 了解接口規範
4. 閱讀 [服務層設計](./04-服務層設計.md) 了解業務邏輯
5. 根據需要閱讀其他專題文檔

### 開發流程

1. 搭建項目結構（參考架構設計）
2. 配置數據庫（參考數據庫設計）
3. 實現API接口（參考API設計）
4. 實現業務邏輯（參考服務層設計）
5. 添加中間件和安全（參考中間件和安全）
6. 集成AI服務（參考AI服務集成）
7. 測試和部署（參考測試策略和部署運維）

---

## 📝 文檔更新記錄

- **v1.0** (2024年)：初始版本，包含完整的後端設計

---

**注意**：本文檔基於MVP開發計劃，專注於核心功能實現。進階功能（如背景設定、關係檔案）的設計會在後續版本中補充。

