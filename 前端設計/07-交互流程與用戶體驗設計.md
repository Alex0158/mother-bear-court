# 熊媽媽法庭 - 交互流程與用戶體驗設計

**項目名稱**：熊媽媽法庭（Mother Bear Court）  
**設計階段**：MVP開發階段  
**文檔版本**：v2.0（優化版）

---

## 🎯 用戶體驗設計原則

### 核心原則

1. **零門檻進入**：快速體驗模式無需註冊，立即使用
2. **清晰引導**：每個步驟都有明確的引導和說明
3. **即時反饋**：每個操作都有明確的視覺反饋
4. **情感化設計**：通過動畫、插畫增強情感連接
5. **錯誤預防**：通過驗證和提示預防用戶錯誤
6. **優雅降級**：網絡錯誤時提供友好的錯誤提示
7. **用戶激勵**：通過成就、積分、徽章激勵用戶持續使用
8. **轉化優化**：在關鍵節點引導用戶註冊和使用更多功能

---

## 🔄 核心交互流程設計

### 1. 快速體驗流程

#### 1.1 流程圖

```
首頁
  ↓
點擊「立即開始」
  ↓
快速體驗頁面
  ↓
選擇布局（左右/上下分屏）
  ↓
填寫角色A陳述
  ↓
填寫角色B陳述
  ↓
（可選）上傳證據
  ↓
點擊「提交案件」
  ↓
顯示「AI正在分析中...」
  ↓
等待30-60秒
  ↓
跳轉到判決結果頁面
  ↓
查看判決結果
  ↓
（可選）生成和好方案（需註冊）
  ↓
（可選）保存記錄（需註冊）
  ↓
引導註冊
```

#### 1.2 詳細交互說明

**步驟1：進入快速體驗**

**觸發**：首頁點擊「立即開始」按鈕

**交互**：
- 按鈕點擊動畫（縮放0.98）
- 顯示加載狀態（可選）
- 跳轉到快速體驗頁面
- 頁面加載動畫（漸入，0.5秒）

**步驟2：選擇布局**

**觸發**：進入快速體驗頁面

**交互**：
- 默認選擇「左右分屏」（桌面端）或「上下分屏」（移動端）
- 用戶可點擊切換布局
- 切換時平滑過渡動畫（0.3秒）
- 保持輸入內容不變

**步驟3：填寫陳述**

**觸發**：用戶開始輸入

**交互**：
- **聚焦輸入框**：
  - 邊框顏色變為溫暖橘
  - 邊框寬度變為2px
  - 顯示小陰影（溫暖橘色調）
  - 顯示引導問題（可選）
- **輸入過程**：
  - 實時更新字數統計
  - 不足50字時顯示警告提示（警告黃）
  - 超過2000字時禁止輸入（或截斷）
  - 每30秒自動保存到localStorage
- **失焦**：
  - 恢復正常邊框樣式
  - 隱藏引導問題（如果顯示）

**步驟4：提交案件**

**觸發**：點擊「提交案件」按鈕

**前置條件**：
- 雙方都填寫完成（至少50字）
- 字數不超過限制

**交互**：
- **提交前驗證**：
  - 檢查雙方是否都填寫完成
  - 檢查字數是否超過限制
  - 驗證通過後啟用提交按鈕
- **提交過程**：
  - 顯示加載動畫（旋轉圖標）
  - 按鈕文字變為「AI正在分析中...」
  - 禁用所有輸入
  - 顯示進度提示：「預計等待時間：30-60秒」
- **提交成功**：
  - 顯示成功提示（Toast）
  - 跳轉到判決結果頁面
  - 平滑過渡動畫
- **提交失敗**：
  - 顯示錯誤提示（Toast）
  - 提供重試按鈕
  - 保持輸入內容不變

**步驟5：查看判決結果**

**觸發**：判決生成完成

**交互**：
- **頁面加載**：
  - 顯示骨架屏（判決書區域）
  - 漸入動畫（0.5秒）
- **責任分比例動畫**：
  - 圓餅圖/進度條從0%到目標比例（1秒動畫）
  - 平滑過渡
- **判決書展示**：
  - 章節導航固定頂部
  - 滾動到對應章節時，導航自動高亮
  - 平滑滾動
- **操作按鈕**：
  - 「生成和好方案」：未註冊時顯示鎖圖標，懸停顯示提示
  - 「保存記錄」：未註冊時顯示鎖圖標
  - 「分享判決」：點擊後顯示分享選項彈窗
  - 「語音播放」：點擊後使用TTS播放判決書

**步驟6：引導註冊**

**觸發**：判決結果頁面，未註冊用戶

**交互**：
- **註冊引導區域**：
  - 背景：漸變背景（溫暖橘到柔和藍）
  - 圖標：母熊法官形象（小尺寸）
  - 標題：「想要保存記錄和獲得更多功能？」
  - 功能列表：
    - 「✓ 保存判決記錄」
    - 「✓ 生成和好方案」
    - 「✓ 執行追蹤」
    - 「✓ 關係健康監測」
  - 「立即註冊」按鈕：主要按鈕樣式（白色背景，溫暖橘文字）
  - 關閉功能：右上角關閉按鈕（可關閉，但會在其他位置再次顯示）
- **點擊註冊**：
  - 跳轉到註冊頁面
  - 保存當前判決ID到sessionStorage
  - 註冊成功後自動關聯當前判決
  - 顯示「註冊成功，已保存判決記錄」提示
- **A/B測試點**：
  - 引導文案（「想要保存記錄」vs「解鎖更多功能」）
  - 按鈕樣式（主要按鈕vs次要按鈕）
  - 顯示時機（立即顯示vs延遲3秒顯示）

---

### 1.3 新手引導流程

#### 1.3.1 首次使用引導

**觸發時機**：首次訪問快速體驗頁面

**引導步驟**：

**步驟1：歡迎提示**
- **內容**：
  - 標題：「歡迎使用熊媽媽法庭」
  - 描述：「我們會公正、溫暖地幫助你們解決問題」
  - 母熊法官形象（中等尺寸）
- **操作**：「開始」按鈕
- **動畫**：淡入 + 縮放

**步驟2：功能介紹**
- **內容**：
  - 標題：「快速獲得公正判決」
  - 描述：「填寫雙方陳述，AI將自動分析並生成判決」
  - 高亮：輸入框區域
- **操作**：「下一步」按鈕
- **動畫**：高亮區域閃爍

**步驟3：操作引導**
- **內容**：
  - 標題：「請分別填寫雙方陳述」
  - 描述：「最少50字，最多2000字」
  - 高亮：角色A輸入框
- **操作**：「我知道了」按鈕
- **動畫**：輸入框邊框高亮

**步驟4：完成提示**
- **內容**：
  - 標題：「填寫完成後點擊提交」
  - 描述：「提交後，AI將自動分析並生成判決」
  - 高亮：提交按鈕
- **操作**：「開始填寫」按鈕（關閉引導）
- **動畫**：提交按鈕脈衝動畫

**交互設計**：
- **跳過功能**：右上角「跳過」按鈕
- **回退功能**：左下角「上一步」按鈕
- **進度指示**：底部顯示進度（1/4、2/4、3/4、4/4）
- **重複查看**：設置頁面可重新查看引導

---

### 2. 完整模式流程（已註冊用戶）

#### 2.1 註冊流程

```
進入註冊頁面
  ↓
步驟1：填寫郵箱和暱稱
  ↓
點擊「發送驗證碼」
  ↓
收到驗證郵件
  ↓
步驟2：輸入驗證碼
  ↓
驗證碼驗證成功
  ↓
步驟3：設置密碼
  ↓
密碼強度檢查
  ↓
確認密碼
  ↓
點擊「完成註冊」
  ↓
註冊成功
  ↓
自動登錄
  ↓
跳轉到配對頁面
```

#### 2.2 配對流程

```
進入配對頁面
  ↓
點擊「生成邀請碼」
  ↓
顯示邀請碼（6位字母數字）
  ↓
分享邀請碼給對方
  ↓
對方輸入邀請碼
  ↓
雙方確認配對
  ↓
配對成功
  ↓
解鎖完整功能
```

#### 2.3 創建案件流程（完整模式）

```
進入創建案件頁面
  ↓
填寫案件標題
  ↓
選擇案件類型（可選，AI自動判斷）
  ↓
填寫角色A陳述
  ↓
等待對方填寫角色B陳述
  ↓
（可選）上傳證據
  ↓
雙方確認提交
  ↓
案件提交成功
  ↓
進入審理中頁面
  ↓
等待判決生成
  ↓
收到判決通知
  ↓
查看判決結果
```

---

### 3. 和好方案流程

#### 3.1 流程圖

```
判決結果頁面
  ↓
點擊「生成和好方案」
  ↓
顯示「正在生成和好方案...」
  ↓
等待30-60秒
  ↓
跳轉到和好方案列表頁面
  ↓
查看方案列表
  ↓
篩選方案（難度/類型/時間）
  ↓
點擊「查看詳情」
  ↓
查看方案詳情
  ↓
（可選）自定義調整方案
  ↓
點擊「選擇方案」
  ↓
確認選擇
  ↓
跳轉到執行追蹤頁面
  ↓
開始執行和好方案
```

#### 3.2 詳細交互說明

**生成和好方案**：

**觸發**：判決結果頁面，點擊「生成和好方案」按鈕

**交互**：
- 顯示加載動畫
- 按鈕文字變為「正在生成和好方案...」
- 禁用按鈕
- 顯示進度提示：「預計等待時間：30-60秒」

**查看方案列表**：

**交互**：
- **篩選**：
  - 點擊篩選標籤，實時過濾方案
  - 多個篩選條件可同時生效
  - 顯示當前篩選結果數量
- **推薦標識**：
  - 推薦方案顯示「最適合你」標籤
  - 顯示推薦理由
- **方案卡片**：
  - 懸停時上移4px，陰影增大
  - 點擊「查看詳情」顯示詳情彈窗
  - 點擊「選擇方案」顯示確認彈窗

**選擇方案**：

**觸發**：點擊「選擇方案」按鈕

**交互**：
- 顯示確認彈窗：「確定選擇這個方案嗎？」
- 確認後，跳轉到方案詳情頁
- 可在此處自定義調整方案
- 確認後，開始執行

---

### 4. 執行追蹤流程

#### 4.1 流程圖

```
選擇和好方案
  ↓
確認執行計劃
  ↓
開始執行
  ↓
收到執行提醒（每天一次）
  ↓
點擊「打卡」
  ↓
填寫執行內容
  ↓
（可選）上傳執行照片
  ↓
填寫執行感受
  ↓
提交打卡
  ↓
打卡成功
  ↓
更新執行進度
  ↓
（可選）查看執行統計
  ↓
執行完成
  ↓
關係改善評估
```

#### 4.2 詳細交互說明

**執行看板**：

**交互**：
- **卡片展示**：
  - 進行中的方案：顯示進度條
  - 已完成的方案：顯示完成標記
  - 點擊卡片查看詳情
- **統計信息**：
  - 總方案數
  - 已完成數
  - 完成率

**執行打卡**：

**觸發**：點擊「打卡」按鈕

**交互**：
- **表單填寫**：
  - 執行時間：日期選擇器
  - 執行內容：文本輸入框
  - 執行感受：文本輸入框（可選）
  - 執行照片：圖片上傳（可選，最多3張）
- **提交打卡**：
  - 驗證必填項
  - 顯示加載動畫
  - 提交成功後顯示成功提示
  - 更新執行進度

**執行提醒**：

**觸發**：每天一次自動提醒

**交互**：
- **推送通知**（如果允許）：
  - 標題：「記得執行和好方案哦」
  - 內容：「今天也要為關係努力💪」
- **郵件通知**（如果開啟）：
  - 發送執行提醒郵件
- **應用內通知**：
  - 顯示通知徽章
  - 點擊跳轉到執行看板

---

### 4.3 用戶激勵機制

#### 4.3.1 成就系統

**成就類型**：

**基礎成就**：
- **首次判決**：完成首次判決
  - 徽章：銅色徽章
  - 積分：+10分
  - 動畫：獲得時彈跳動畫
- **判決達人**：完成10次判決
  - 徽章：銀色徽章
  - 積分：+50分
- **判決大師**：完成50次判決
  - 徽章：金色徽章
  - 積分：+200分

**關係成就**：
- **和好使者**：執行和好方案
  - 徽章：愛心徽章
  - 積分：+20分
- **關係守護者**：關係健康分數提升10分
  - 徽章：守護徽章
  - 積分：+30分
- **完美執行**：完成所有執行打卡
  - 徽章：完美徽章
  - 積分：+50分

**社交成就**：
- **分享達人**：分享判決10次
  - 徽章：分享徽章
  - 積分：+30分
- **邀請大使**：邀請5位好友註冊
  - 徽章：大使徽章
  - 積分：+100分

**成就展示**：
- **個人中心**：展示所有成就
- **成就動畫**：獲得成就時的動畫效果
- **成就分享**：可分享成就到社交媒體

#### 4.3.2 積分系統

**積分獲取**：
- **完成判決**：+10分
- **執行和好方案**：+20分
- **完成執行打卡**：+5分
- **獲得成就**：根據成就類型獲得積分
- **邀請好友**：+50分（好友註冊後）
- **每日簽到**：+5分（連續簽到遞增）

**積分使用**：
- **解鎖高級功能**：
  - 關係健康監測：1000分
  - 專業法官判決：500分
  - 一對一諮詢：2000分
- **兌換優惠券**：
  - 會員折扣券：500分
  - 免費判決券：200分
- **提升關係健康分數**：100分 = 1分關係健康分數

**積分展示**：
- **個人中心**：顯示總積分、可用積分
- **積分歷史**：顯示積分獲取和使用記錄
- **積分等級**：根據積分顯示等級（新手、進階、專家、大師）

#### 4.3.3 社交分享

**分享功能**：

**分享判決結果**：
- **匿名分享**：隱藏個人信息，只分享判決內容
- **分享渠道**：微信、微博、Facebook、Twitter
- **分享格式**：鏈接、圖片、文字
- **分享獎勵**：每次分享+5積分

**分享和好方案**：
- **分享內容**：方案標題、描述、執行步驟
- **分享渠道**：同上
- **分享獎勵**：每次分享+10積分

**邀請好友**：
- **邀請方式**：生成邀請鏈接、邀請碼
- **邀請獎勵**：好友註冊後雙方各+50積分
- **邀請追蹤**：顯示邀請成功數量

---

## 🎨 動畫設計

### 動畫原則

1. **自然流暢**：動畫時長適中，過渡自然
2. **有意義**：動畫傳達信息，增強理解
3. **不干擾**：動畫不影響用戶操作
4. **性能優先**：使用CSS動畫，避免JavaScript動畫

### 動畫類型

**過渡動畫**：
- **淡入淡出**（Fade）：
  - 時長：0.3秒
  - 用途：頁面切換、彈窗顯示
- **滑動**（Slide）：
  - 時長：0.3秒
  - 用途：側邊欄、抽屜
- **縮放**（Scale）：
  - 時長：0.2秒
  - 用途：按鈕點擊、彈窗顯示

**狀態動畫**：
- **加載動畫**：
  - 旋轉圖標：1秒一圈
  - 骨架屏：閃爍動畫
- **進度動畫**：
  - 進度條：平滑過渡
  - 責任分比例：從0%到目標比例（1秒）

**反饋動畫**：
- **按鈕點擊**：縮放0.98（0.1秒）
- **卡片懸停**：上移4px（0.3秒）
- **輸入框聚焦**：邊框顏色變化（0.2秒）

### 動畫實現

**CSS動畫**：
```css
/* 淡入動畫 */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* 滑入動畫 */
@keyframes slideInRight {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}
```

**React動畫庫**：
- **Framer Motion**：複雜動畫
- **React Spring**：物理動畫
- **CSS Transitions**：簡單動畫（優先使用）

---

## 📱 響應式設計

### 斷點定義

```typescript
const breakpoints = {
  xs: 0,      // 移動端
  sm: 576,   // 大屏手機
  md: 768,   // 平板
  lg: 1024,  // 桌面
  xl: 1440,  // 大桌面
};
```

### 適配策略

**移動端優先**：
- 先設計移動端
- 再擴展到桌面端
- 使用媒體查詢

**彈性布局**：
- 使用Flexbox和Grid
- 百分比寬度
- 最大寬度限制

**字體縮放**：
- 使用rem單位
- 根據屏幕大小調整根字體大小

**圖片適配**：
- 使用srcset
- 響應式圖片
- 懶加載

### 具體適配

**快速體驗頁面**：
- **桌面端**：左右分屏，輸入框可拖拽調整高度
- **移動端**：上下分屏，輸入框固定高度，可滾動

**判決結果頁面**：
- **桌面端**：圓餅圖展示責任分比例
- **移動端**：進度條展示責任分比例

**案件列表頁面**：
- **桌面端**：2列網格
- **移動端**：1列網格

---

## ♿ 無障礙設計

### 可訪問性要求

**語義化HTML**：
- 使用正確的HTML標籤
- 標題層級正確（h1-h6）
- 列表使用ul/ol

**ARIA標籤**：
- 為交互元素添加ARIA標籤
- 表單元素添加label
- 按鈕添加aria-label

**鍵盤導航**：
- 所有交互元素可通過鍵盤訪問
- Tab順序合理
- 焦點樣式明顯

**屏幕閱讀器**：
- 兼容主流屏幕閱讀器
- 提供alt文本
- 使用aria-describedby

### 對比度要求

**文字對比度**：
- 主要文字：4.5:1（WCAG AA）
- 大號文字：3:1（WCAG AA）

**圖標對比度**：
- 確保圖標清晰可見
- 使用足夠的對比度

---

## 🚨 錯誤處理設計

### 錯誤類型

**表單驗證錯誤**：
- **位置**：輸入框下方
- **樣式**：紅色文字 + 錯誤圖標
- **交互**：輸入正確後自動消失

**網絡錯誤**：
- **Toast提示**：顯示錯誤信息
- **重試按鈕**：提供重試功能
- **離線提示**：網絡斷開時顯示

**業務錯誤**：
- **Toast提示**：顯示錯誤信息
- **錯誤頁面**：嚴重錯誤時顯示錯誤頁面
- **聯繫支持**：提供聯繫支持的方式

### 錯誤預防

**輸入驗證**：
- 實時驗證
- 提交前驗證
- 友好的錯誤提示

**確認操作**：
- 重要操作需要確認
- 顯示確認彈窗
- 明確操作後果

**自動保存**：
- 表單自動保存
- 防止數據丟失
- 恢復草稿

---

## 📊 性能優化設計

### 加載優化

**代碼分割**：
- 路由級別分割
- 組件級別分割
- 按需加載

**資源優化**：
- 圖片優化（WebP格式）
- 字體子集化
- CSS優化

**預加載**：
- 關鍵路由預加載
- 懸停預加載
- 關鍵資源預加載

### 渲染優化

**虛擬列表**：
- 長列表使用虛擬列表
- 減少DOM節點
- 提高渲染性能

**懶加載**：
- 圖片懶加載
- 組件懶加載
- 路由懶加載

**緩存策略**：
- API響應緩存
- 靜態資源緩存
- 本地存儲緩存

---

## 🎯 用戶體驗優化

### 加載體驗

**骨架屏**：
- 內容加載時顯示骨架屏
- 保持布局穩定
- 減少視覺跳動

**進度提示**：
- 顯示加載進度
- 預計等待時間
- 取消操作（可選）

### 操作反饋

**即時反饋**：
- 按鈕點擊動畫
- 輸入驗證提示
- 操作成功提示

**狀態反饋**：
- 加載狀態
- 成功狀態
- 錯誤狀態

### 情感化設計

**動畫效果**：
- 母熊法官動畫
- 頁面過渡動畫
- 交互反饋動畫

**視覺元素**：
- 溫暖的色彩
- 親和的插畫
- 品牌一致性

---

**文檔版本**：v2.0（優化版）  
**創建日期**：2024年  
**最後更新**：2024年（已新增新手引導流程、用戶激勵機制、社交分享功能）

