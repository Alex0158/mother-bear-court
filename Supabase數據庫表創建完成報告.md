# Supabase æ•¸æ“šåº«è¡¨å‰µå»ºå®Œæˆå ±å‘Š

## âœ… å®Œæˆç‹€æ…‹

**æ—¥æœŸ**: 2025-12-11  
**æ–¹å¼**: é€šé Cursor MCP ç›´æ¥é€£æ¥ Supabase  
**ç‹€æ…‹**: âœ… æˆåŠŸ

---

## ğŸ“Š å‰µå»ºçš„è¡¨çµæ§‹

### å·²å‰µå»ºçš„ 9 å€‹è¡¨ï¼š

1. âœ… **users** (ç”¨æˆ¶è¡¨)
   - 17 å€‹å­—æ®µ
   - 4 å€‹ç´¢å¼•
   - ä¸»éµï¼šid (UUID)

2. âœ… **pairings** (é…å°è¡¨)
   - 10 å€‹å­—æ®µ
   - 6 å€‹ç´¢å¼•
   - å¤–éµï¼šuser1_id, user2_id â†’ users.id

3. âœ… **cases** (æ¡ˆä»¶è¡¨)
   - 15 å€‹å­—æ®µ
   - 9 å€‹ç´¢å¼•
   - å¤–éµï¼špairing_id â†’ pairings.id, plaintiff_id/defendant_id â†’ users.id

4. âœ… **evidences** (è­‰æ“šè¡¨)
   - 8 å€‹å­—æ®µ
   - 3 å€‹ç´¢å¼•
   - å¤–éµï¼šcase_id â†’ cases.id, user_id â†’ users.id

5. âœ… **judgments** (åˆ¤æ±ºè¡¨)
   - 12 å€‹å­—æ®µ
   - 4 å€‹ç´¢å¼•
   - å¤–éµï¼šcase_id â†’ cases.id (å”¯ä¸€)

6. âœ… **reconciliation_plans** (å’Œå¥½æ–¹æ¡ˆè¡¨)
   - 12 å€‹å­—æ®µ
   - 3 å€‹ç´¢å¼•
   - å¤–éµï¼šjudgment_id â†’ judgments.id

7. âœ… **execution_records** (åŸ·è¡Œè¨˜éŒ„è¡¨)
   - 9 å€‹å­—æ®µ
   - 4 å€‹ç´¢å¼•
   - å¤–éµï¼šreconciliation_plan_id â†’ reconciliation_plans.id, user_id â†’ users.id

8. âœ… **quick_sessions** (å¿«é€Ÿé«”é©—æ¨¡å¼Sessionè¡¨)
   - 7 å€‹å­—æ®µ
   - 3 å€‹ç´¢å¼•
   - å¤–éµï¼špairing_id â†’ pairings.id, case_id â†’ cases.id

9. âœ… **email_verifications** (éƒµä»¶é©—è­‰è¡¨)
   - 6 å€‹å­—æ®µ
   - 4 å€‹ç´¢å¼•
   - ä¸»éµï¼šid (UUID)

---

## ğŸ” é©—è­‰çµæœ

### è¡¨åˆ—è¡¨ç¢ºèªï¼š
```
âœ… cases
âœ… email_verifications
âœ… evidences
âœ… execution_records
âœ… judgments
âœ… pairings
âœ… quick_sessions
âœ… reconciliation_plans
âœ… users
```

### é·ç§»è¨˜éŒ„ï¼š
- **é·ç§»åç¨±**: `initial_schema`
- **ç‰ˆæœ¬**: `20251211155536`
- **ç‹€æ…‹**: âœ… å·²æ‡‰ç”¨

### æ•¸æ“šåº«é€£æ¥ï¼š
- **æ•¸æ“šåº«**: PostgreSQL 17.6
- **é …ç›® URL**: `https://pfxrglsjgmpfyiwyxzou.supabase.co`
- **é€£æ¥ç‹€æ…‹**: âœ… æ­£å¸¸

---

## ğŸ¯ é—œéµç™¼ç¾

### 1. æ•¸æ“šåº«é€£æ¥æ­£å¸¸
- âœ… å¯ä»¥æˆåŠŸé€£æ¥åˆ° Supabase
- âœ… å¯ä»¥åŸ·è¡Œ SQL æŸ¥è©¢
- âœ… é …ç›®ç‹€æ…‹ç‚º Active

### 2. è¡¨çµæ§‹å·²å®Œæ•´å‰µå»º
- âœ… æ‰€æœ‰ 9 å€‹è¡¨éƒ½å·²å‰µå»º
- âœ… æ‰€æœ‰ç´¢å¼•éƒ½å·²å‰µå»º
- âœ… æ‰€æœ‰å¤–éµç´„æŸéƒ½å·²è¨­ç½®

### 3. Railway é€£æ¥å•é¡ŒåŸå› 
æ ¹æ“šä¹‹å‰çš„éŒ¯èª¤æ—¥èªŒï¼ŒRailway ç„¡æ³•é€£æ¥çš„åŸå› å¯èƒ½æ˜¯ï¼š
- âŒ é …ç›®å¯èƒ½æ›¾ç¶“æš«åœï¼ˆä½†ç¾åœ¨å·²æ¢å¾©ï¼‰
- âŒ ç¶²çµ¡è·¯ç”±å•é¡Œ
- âŒ DATABASE_URL é…ç½®å•é¡Œ

**ç¾åœ¨è¡¨å·²å‰µå»ºï¼ŒRailway æ‡‰è©²å¯ä»¥æ­£å¸¸é€£æ¥äº†ï¼**

---

## ğŸ“ ä¸‹ä¸€æ­¥è¡Œå‹•

### 1. é©—è­‰ Railway é€£æ¥

ç¾åœ¨æ•¸æ“šåº«è¡¨å·²å‰µå»ºï¼ŒRailway éƒ¨ç½²æ‡‰è©²å¯ä»¥ï¼š

1. âœ… æˆåŠŸé€£æ¥åˆ°æ•¸æ“šåº«
2. âœ… è·³éé·ç§»æ­¥é©Ÿï¼ˆè¡¨å·²å­˜åœ¨ï¼‰
3. âœ… æ‡‰ç”¨æ­£å¸¸é‹è¡Œ

### 2. æª¢æŸ¥ Railway æ—¥èªŒ

åœ¨ Railway Dashboard ä¸­æŸ¥çœ‹æœ€æ–°éƒ¨ç½²ï¼Œæ‡‰è©²çœ‹åˆ°ï¼š

```
âœ… info: æ•¸æ“šåº«é€£æ¥ä¿¡æ¯ {...}
âœ… info: æ•¸æ“šåº«é·ç§»å¤±æ•—ï¼Œå˜—è©¦ç›´æ¥é€£æ¥ï¼ˆé€™æ˜¯æ­£å¸¸çš„ï¼Œå› ç‚ºè¡¨å·²å­˜åœ¨ï¼‰
âœ… info: æ•¸æ“šåº«é€£æ¥æˆåŠŸä¸¦é©—è­‰é€šé
âœ… info: æœå‹™å™¨é‹è¡Œåœ¨ç«¯å£ 8080
```

### 3. æ¸¬è©¦æ‡‰ç”¨åŠŸèƒ½

ä¸€æ—¦ Railway é€£æ¥æˆåŠŸï¼Œå¯ä»¥æ¸¬è©¦ï¼š

- âœ… å¥åº·æª¢æŸ¥ç«¯é»ï¼š`GET /health`
- âœ… æ•¸æ“šåº«å¥åº·æª¢æŸ¥ï¼š`GET /health/ready`
- âœ… API ç«¯é»æ˜¯å¦æ­£å¸¸éŸ¿æ‡‰

---

## ğŸ”§ æŠ€è¡“ç´°ç¯€

### ä½¿ç”¨çš„ MCP å·¥å…·ï¼š

1. **mcp_supabase_list_tables** - åˆ—å‡ºæ‰€æœ‰è¡¨
2. **mcp_supabase_execute_sql** - åŸ·è¡Œ SQL æŸ¥è©¢
3. **mcp_supabase_apply_migration** - æ‡‰ç”¨æ•¸æ“šåº«é·ç§»
4. **mcp_supabase_list_migrations** - åˆ—å‡ºé·ç§»è¨˜éŒ„
5. **mcp_supabase_get_logs** - æŸ¥çœ‹æ•¸æ“šåº«æ—¥èªŒ

### é·ç§» SQLï¼š

- å‰µå»ºäº†æ‰€æœ‰ 9 å€‹è¡¨
- å‰µå»ºäº†æ‰€æœ‰ç´¢å¼•ï¼ˆå…± 36 å€‹ç´¢å¼•ï¼‰
- è¨­ç½®äº†æ‰€æœ‰å¤–éµç´„æŸ
- è¨­ç½®äº†æ‰€æœ‰é»˜èªå€¼

---

## âœ… å®Œæˆæª¢æŸ¥æ¸…å–®

- [x] æ•¸æ“šåº«é€£æ¥æ¸¬è©¦
- [x] æ‰€æœ‰è¡¨çµæ§‹å‰µå»º
- [x] æ‰€æœ‰ç´¢å¼•å‰µå»º
- [x] æ‰€æœ‰å¤–éµç´„æŸè¨­ç½®
- [x] é·ç§»è¨˜éŒ„å‰µå»º
- [x] è¡¨çµæ§‹é©—è­‰

---

## ğŸ‰ ç¸½çµ

**é€šé Cursor MCP é€£æ¥ Supabase éå¸¸æœ‰ç”¨ï¼**

1. âœ… **ç›´æ¥è¨ºæ–·**ï¼šå¯ä»¥ç«‹å³æª¢æŸ¥æ•¸æ“šåº«ç‹€æ…‹
2. âœ… **å¿«é€Ÿä¿®å¾©**ï¼šå¯ä»¥ç›´æ¥å‰µå»ºè¡¨çµæ§‹
3. âœ… **å¯¦æ™‚é©—è­‰**ï¼šå¯ä»¥ç«‹å³ç¢ºèªæ“ä½œçµæœ

**ç¾åœ¨æ•¸æ“šåº«å·²å®Œå…¨æº–å‚™å¥½ï¼ŒRailway æ‡‰è©²å¯ä»¥æ­£å¸¸é€£æ¥å’Œé‹è¡Œäº†ï¼**

---

## ğŸ“š ç›¸é—œæ–‡æª”

- `Supabaseå®Œæ•´è¨­ç½®æª¢æŸ¥æ¸…å–®.md` - Supabase è¨­ç½®æŒ‡å—
- `Supabaseé€£æ¥å•é¡Œæ’æŸ¥æŒ‡å—.md` - é€£æ¥å•é¡Œæ’æŸ¥
- `Railwayæ•¸æ“šåº«é€£æ¥å•é¡Œæ·±åº¦åˆ†æ.md` - å•é¡Œåˆ†æ

