# æ¥å£å°æ¥æª¢æŸ¥å ±å‘Š

**æª¢æŸ¥æ™‚é–“**ï¼š2024å¹´12æœˆ  
**æª¢æŸ¥ç¯„åœ**ï¼šæ‰€æœ‰å¾Œç«¯APIæ¥å£èˆ‡å‰ç«¯æœå‹™èª¿ç”¨çš„å°æ¥æƒ…æ³

---

## ğŸ“Š æª¢æŸ¥çµæœç¸½è¦½

### ç¸½é«”ç‹€æ…‹ï¼šâœ… **åŸºæœ¬æ­£ç¢ºï¼Œç™¼ç¾ 3 å€‹å•é¡Œéœ€è¦ä¿®å¾©**

| æ¨¡å¡Š | å¾Œç«¯æ¥å£æ•¸ | å‰ç«¯èª¿ç”¨æ•¸ | åŒ¹é…ç‹€æ…‹ | å•é¡Œæ•¸ |
|------|-----------|-----------|---------|--------|
| èªè­‰ (auth) | 6 | 6 | âœ… åŒ¹é… | 0 |
| Session | 1 | 1 | âš ï¸ ä¸åŒ¹é… | 1 |
| æ¡ˆä»¶ (case) | 5 | 7 | âš ï¸ éƒ¨åˆ†ä¸åŒ¹é… | 2 |
| åˆ¤æ±º (judgment) | 3 | 3 | âœ… åŒ¹é… | 0 |
| å’Œå¥½æ–¹æ¡ˆ (reconciliation) | 3 | 3 | âœ… åŒ¹é… | 0 |
| åŸ·è¡Œ (execution) | 3 | 3 | âœ… åŒ¹é… | 0 |
| é…å° (pairing) | 3 | 3 | âœ… åŒ¹é… | 0 |
| ç”¨æˆ¶ (user) | 2 | 2 | âœ… åŒ¹é… | 0 |
| å¥åº·æª¢æŸ¥ (health) | 3 | 0 | âœ… æ­£å¸¸ | 0 |

**ç¸½è¨ˆ**ï¼š26å€‹å¾Œç«¯æ¥å£ï¼Œ28å€‹å‰ç«¯èª¿ç”¨ï¼Œ3å€‹å•é¡Œéœ€è¦ä¿®å¾©

---

## ğŸ” è©³ç´°æª¢æŸ¥çµæœ

### 1. èªè­‰æ¨¡å¡Š (auth) âœ…

#### å¾Œç«¯æ¥å£
- âœ… `POST /api/v1/auth/register` - ç”¨æˆ¶è¨»å†Š
- âœ… `POST /api/v1/auth/login` - ç”¨æˆ¶ç™»éŒ„
- âœ… `POST /api/v1/auth/send-verification-code` - ç™¼é€é©—è­‰ç¢¼
- âœ… `POST /api/v1/auth/verify-email` - é©—è­‰éƒµä»¶é©—è­‰ç¢¼
- âœ… `POST /api/v1/auth/reset-password` - é‡ç½®å¯†ç¢¼
- âœ… `POST /api/v1/auth/reset-password-confirm` - ç¢ºèªé‡ç½®å¯†ç¢¼

#### å‰ç«¯èª¿ç”¨
- âœ… `register()` â†’ `POST /auth/register`
- âœ… `login()` â†’ `POST /auth/login`
- âœ… `sendVerificationCode()` â†’ `POST /auth/send-verification-code`
- âœ… `verifyEmail()` â†’ `POST /auth/verify-email`
- âœ… `resetPassword()` â†’ `POST /auth/reset-password`
- âœ… `confirmResetPassword()` â†’ `POST /auth/reset-password-confirm`

**ç‹€æ…‹**ï¼šâœ… å®Œå…¨åŒ¹é…

---

### 2. Sessionæ¨¡å¡Š âš ï¸ **å•é¡Œ 1**

#### å¾Œç«¯æ¥å£
- âœ… `POST /api/v1/sessions/quick` - å‰µå»ºSessionï¼ˆå¿«é€Ÿé«”é©—æ¨¡å¼ï¼‰

#### å‰ç«¯èª¿ç”¨
- âš ï¸ `createSession()` â†’ `GET /sessions/create` âŒ **éŒ¯èª¤**

**å•é¡Œ**ï¼š
- å¾Œç«¯å®šç¾©ï¼š`POST /api/v1/sessions/quick`
- å‰ç«¯èª¿ç”¨ï¼š`GET /sessions/create`
- **HTTPæ–¹æ³•ä¸åŒ¹é…**ï¼šå¾Œç«¯æ˜¯POSTï¼Œå‰ç«¯æ˜¯GET
- **è·¯å¾‘ä¸åŒ¹é…**ï¼šå¾Œç«¯æ˜¯`/sessions/quick`ï¼Œå‰ç«¯æ˜¯`/sessions/create`

**ä¿®å¾©æ–¹æ¡ˆ**ï¼š
```typescript
// frontend/src/services/api/session.ts
export const createSession = async (): Promise<Session> => {
  const response = await request.post<ApiResponse<{ session_id: string; expires_at: string }>>(
    '/sessions/quick'  // æ”¹ç‚º POST /sessions/quick
  );
  // ...
};
```

---

### 3. æ¡ˆä»¶æ¨¡å¡Š âš ï¸ **å•é¡Œ 2-3**

#### å¾Œç«¯æ¥å£
- âœ… `POST /api/v1/cases/quick` - å‰µå»ºæ¡ˆä»¶ï¼ˆå¿«é€Ÿé«”é©—æ¨¡å¼ï¼‰
- âœ… `POST /api/v1/cases` - å‰µå»ºæ¡ˆä»¶ï¼ˆå®Œæ•´æ¨¡å¼ï¼‰
- âœ… `GET /api/v1/cases/:id` - ç²å–æ¡ˆä»¶è©³æƒ…
- âœ… `GET /api/v1/cases/by-session` - é€šéSession IDç²å–æ¡ˆä»¶
- âœ… `POST /api/v1/cases/:id/evidence` - ä¸Šå‚³è­‰æ“š

#### å‰ç«¯èª¿ç”¨
- âœ… `createQuickCase()` â†’ `POST /cases/quick`
- âœ… `createCase()` â†’ `POST /cases`
- âœ… `getCase()` â†’ `GET /cases/:id`
- âœ… `getCaseBySessionId()` â†’ `GET /cases/by-session`
- âœ… `uploadEvidence()` â†’ `POST /cases/:id/evidence`
- âš ï¸ `submitCase()` â†’ `POST /cases/:id/submit` âŒ **å¾Œç«¯ä¸å­˜åœ¨**
- âš ï¸ `updateCase()` â†’ `PUT /cases/:id` âŒ **å¾Œç«¯ä¸å­˜åœ¨**
- âš ï¸ `getCaseList()` â†’ `GET /cases` âŒ **å¾Œç«¯ä¸å­˜åœ¨**

**å•é¡Œ**ï¼š

**å•é¡Œ 2**ï¼šå‰ç«¯èª¿ç”¨äº†ä¸å­˜åœ¨çš„æ¥å£
- `submitCase()` â†’ `POST /cases/:id/submit` - å¾Œç«¯æ²’æœ‰æ­¤æ¥å£
- `updateCase()` â†’ `PUT /cases/:id` - å¾Œç«¯æ²’æœ‰æ­¤æ¥å£
- `getCaseList()` â†’ `GET /cases` - å¾Œç«¯æ²’æœ‰æ­¤æ¥å£

**å•é¡Œ 3**ï¼šå‰ç«¯ `getJudgmentByCaseId()` èª¿ç”¨äº†ä¸å­˜åœ¨çš„æ¥å£
- `getJudgmentByCaseId()` â†’ `GET /cases/:id/judgment` - å¾Œç«¯æ²’æœ‰æ­¤æ¥å£

**ä¿®å¾©æ–¹æ¡ˆ**ï¼š

**é¸é … A**ï¼šå¦‚æœé€™äº›åŠŸèƒ½ä¸éœ€è¦ï¼Œåˆªé™¤å‰ç«¯èª¿ç”¨
**é¸é … B**ï¼šå¦‚æœéœ€è¦é€™äº›åŠŸèƒ½ï¼Œåœ¨å¾Œç«¯æ·»åŠ å°æ‡‰æ¥å£

---

### 4. åˆ¤æ±ºæ¨¡å¡Š âœ…

#### å¾Œç«¯æ¥å£
- âœ… `POST /api/v1/judgments/generate/:id` - ç”Ÿæˆåˆ¤æ±º
- âœ… `GET /api/v1/judgments/:id` - ç²å–åˆ¤æ±ºè©³æƒ…
- âœ… `POST /api/v1/judgments/:id/accept` - æ¥å—/æ‹’çµ•åˆ¤æ±º

#### å‰ç«¯èª¿ç”¨
- âœ… `generateJudgment()` â†’ `POST /judgments/generate/:id`
- âœ… `getJudgment()` â†’ `GET /judgments/:id`
- âœ… `acceptJudgment()` â†’ `POST /judgments/:id/accept`
- âš ï¸ `getJudgmentByCaseId()` â†’ `GET /cases/:id/judgment` âŒ **å¾Œç«¯ä¸å­˜åœ¨**ï¼ˆå·²åœ¨å•é¡Œ3ä¸­èªªæ˜ï¼‰

**ç‹€æ…‹**ï¼šâœ… æ ¸å¿ƒæ¥å£åŒ¹é…ï¼Œä½†æœ‰ä¸€å€‹ä¾¿æ·æ–¹æ³•èª¿ç”¨äº†ä¸å­˜åœ¨çš„æ¥å£

---

### 5. å’Œå¥½æ–¹æ¡ˆæ¨¡å¡Š âœ…

#### å¾Œç«¯æ¥å£
- âœ… `POST /api/v1/judgments/:id/reconciliation-plans` - ç”Ÿæˆå’Œå¥½æ–¹æ¡ˆ
- âœ… `GET /api/v1/judgments/:id/reconciliation-plans` - ç²å–å’Œå¥½æ–¹æ¡ˆåˆ—è¡¨
- âœ… `POST /api/v1/reconciliation-plans/:id/select` - é¸æ“‡å’Œå¥½æ–¹æ¡ˆ

#### å‰ç«¯èª¿ç”¨
- âœ… `generatePlans()` â†’ `POST /judgments/:id/reconciliation-plans`
- âœ… `getPlans()` â†’ `GET /judgments/:id/reconciliation-plans`
- âœ… `selectPlan()` â†’ `POST /reconciliation-plans/:id/select`

**ç‹€æ…‹**ï¼šâœ… å®Œå…¨åŒ¹é…

---

### 6. åŸ·è¡Œæ¨¡å¡Š âœ…

#### å¾Œç«¯æ¥å£
- âœ… `POST /api/v1/execution/confirm` - ç¢ºèªåŸ·è¡Œ
- âœ… `POST /api/v1/execution/checkin` - åŸ·è¡Œæ‰“å¡
- âœ… `GET /api/v1/execution/status` - ç²å–åŸ·è¡Œç‹€æ…‹

#### å‰ç«¯èª¿ç”¨
- âœ… `confirmExecution()` â†’ `POST /execution/confirm`
- âœ… `checkin()` â†’ `POST /execution/checkin`
- âœ… `getExecutionStatus()` â†’ `GET /execution/status?plan_id=xxx`

**ç‹€æ…‹**ï¼šâœ… å®Œå…¨åŒ¹é…

---

### 7. é…å°æ¨¡å¡Š âœ…

#### å¾Œç«¯æ¥å£
- âœ… `POST /api/v1/pairing/create` - å‰µå»ºé…å°
- âœ… `POST /api/v1/pairing/join` - åŠ å…¥é…å°
- âœ… `GET /api/v1/pairing/status` - ç²å–é…å°ç‹€æ…‹

#### å‰ç«¯èª¿ç”¨
- âœ… `createPairing()` â†’ `POST /pairing/create`
- âœ… `joinPairing()` â†’ `POST /pairing/join`
- âœ… `getPairingStatus()` â†’ `GET /pairing/status`

**ç‹€æ…‹**ï¼šâœ… å®Œå…¨åŒ¹é…

---

### 8. ç”¨æˆ¶æ¨¡å¡Š âœ…

#### å¾Œç«¯æ¥å£
- âœ… `GET /api/v1/user/profile` - ç²å–ç”¨æˆ¶è³‡æ–™
- âœ… `PUT /api/v1/user/profile` - æ›´æ–°ç”¨æˆ¶è³‡æ–™

#### å‰ç«¯èª¿ç”¨
- âœ… `getProfile()` â†’ `GET /user/profile`
- âœ… `updateProfile()` â†’ `PUT /user/profile`

**ç‹€æ…‹**ï¼šâœ… å®Œå…¨åŒ¹é…

---

### 9. å¥åº·æª¢æŸ¥æ¨¡å¡Š âœ…

#### å¾Œç«¯æ¥å£
- âœ… `GET /health` - å¥åº·æª¢æŸ¥
- âœ… `GET /health/ready` - å°±ç·’æª¢æŸ¥
- âœ… `GET /health/live` - å­˜æ´»æª¢æŸ¥

#### å‰ç«¯èª¿ç”¨
- âœ… ç„¡å‰ç«¯èª¿ç”¨ï¼ˆæ­£å¸¸ï¼Œå¥åº·æª¢æŸ¥ç”¨æ–¼ç›£æ§ï¼‰

**ç‹€æ…‹**ï¼šâœ… æ­£å¸¸ï¼ˆå¥åº·æª¢æŸ¥ä¸éœ€è¦å‰ç«¯èª¿ç”¨ï¼‰

---

## ğŸš¨ ç™¼ç¾çš„å•é¡Œ

### å•é¡Œ 1ï¼šSessionå‰µå»ºæ¥å£ä¸åŒ¹é… âš ï¸ **åš´é‡**

**ä½ç½®**ï¼š`frontend/src/services/api/session.ts`

**å•é¡Œ**ï¼š
- å¾Œç«¯ï¼š`POST /api/v1/sessions/quick`
- å‰ç«¯ï¼š`GET /sessions/create`

**å½±éŸ¿**ï¼š
- å¿«é€Ÿé«”é©—æ¨¡å¼ç„¡æ³•å‰µå»ºSession
- é€™æ˜¯P0åŠŸèƒ½ï¼Œå¿…é ˆä¿®å¾©

**ä¿®å¾©**ï¼šéœ€è¦ä¿®æ”¹å‰ç«¯ä»£ç¢¼

---

### å•é¡Œ 2ï¼šæ¡ˆä»¶ç›¸é—œæ¥å£ä¸åŒ¹é… âš ï¸ **ä¸­ç­‰**

**ä½ç½®**ï¼š`frontend/src/services/api/case.ts`

**å•é¡Œ**ï¼š
- `submitCase()` â†’ `POST /cases/:id/submit` - å¾Œç«¯ä¸å­˜åœ¨
- `updateCase()` â†’ `PUT /cases/:id` - å¾Œç«¯ä¸å­˜åœ¨
- `getCaseList()` â†’ `GET /cases` - å¾Œç«¯ä¸å­˜åœ¨

**å½±éŸ¿**ï¼š
- å¦‚æœå‰ç«¯é é¢ä½¿ç”¨äº†é€™äº›æ–¹æ³•ï¼Œæœƒå°è‡´404éŒ¯èª¤
- éœ€è¦ç¢ºèªé€™äº›åŠŸèƒ½æ˜¯å¦çœŸçš„éœ€è¦

**ä¿®å¾©**ï¼š
- é¸é …Aï¼šå¦‚æœä¸éœ€è¦ï¼Œåˆªé™¤å‰ç«¯èª¿ç”¨
- é¸é …Bï¼šå¦‚æœéœ€è¦ï¼Œåœ¨å¾Œç«¯æ·»åŠ å°æ‡‰æ¥å£

---

### å•é¡Œ 3ï¼šåˆ¤æ±ºä¾¿æ·æ–¹æ³•èª¿ç”¨ä¸å­˜åœ¨çš„æ¥å£ âš ï¸ **ä¸­ç­‰**

**ä½ç½®**ï¼š`frontend/src/services/api/judgment.ts`

**å•é¡Œ**ï¼š
- `getJudgmentByCaseId()` â†’ `GET /cases/:id/judgment` - å¾Œç«¯ä¸å­˜åœ¨

**å½±éŸ¿**ï¼š
- å¦‚æœå‰ç«¯ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œæœƒå°è‡´404éŒ¯èª¤
- ä½†æ­¤æ–¹æ³•æœ‰éŒ¯èª¤è™•ç†ï¼Œæœƒè¿”å›nullï¼Œä¸æœƒå´©æ½°

**ä¿®å¾©**ï¼š
- é¸é …Aï¼šä¿®æ”¹ç‚ºå…ˆç²å–æ¡ˆä»¶ï¼Œå†é€šéæ¡ˆä»¶ç²å–åˆ¤æ±ºIDï¼Œç„¶å¾Œèª¿ç”¨ `getJudgment()`
- é¸é …Bï¼šåœ¨å¾Œç«¯æ·»åŠ  `GET /cases/:id/judgment` æ¥å£

---

## ğŸ”§ ä¿®å¾©å»ºè­°

### å„ªå…ˆç´š 1ï¼šç«‹å³ä¿®å¾©ï¼ˆP0åŠŸèƒ½ï¼‰

#### ä¿®å¾© Session å‰µå»ºæ¥å£

**æ–‡ä»¶**ï¼š`frontend/src/services/api/session.ts`

**ä¿®æ”¹**ï¼š
```typescript
// ä¿®æ”¹å‰
export const createSession = async (): Promise<Session> => {
  const response = await request.get<ApiResponse<{ session_id: string; expires_at: string }>>(
    '/sessions/create'
  );
  // ...
};

// ä¿®æ”¹å¾Œ
export const createSession = async (): Promise<Session> => {
  const response = await request.post<ApiResponse<{ session_id: string; expires_at: string }>>(
    '/sessions/quick'  // æ”¹ç‚º POST /sessions/quick
  );
  // ...
};
```

---

### å„ªå…ˆç´š 2ï¼šç¢ºèªä¸¦ä¿®å¾©ï¼ˆP1åŠŸèƒ½ï¼‰

#### æª¢æŸ¥å‰ç«¯æ˜¯å¦ä½¿ç”¨ä¸å­˜åœ¨çš„æ¥å£

éœ€è¦æª¢æŸ¥ä»¥ä¸‹æ–‡ä»¶æ˜¯å¦ä½¿ç”¨äº†é€™äº›æ–¹æ³•ï¼š
- `submitCase()` - æª¢æŸ¥æ˜¯å¦æœ‰é é¢èª¿ç”¨
- `updateCase()` - æª¢æŸ¥æ˜¯å¦æœ‰é é¢èª¿ç”¨
- `getCaseList()` - æª¢æŸ¥æ˜¯å¦æœ‰é é¢èª¿ç”¨
- `getJudgmentByCaseId()` - æª¢æŸ¥æ˜¯å¦æœ‰é é¢èª¿ç”¨

**å¦‚æœä½¿ç”¨äº†**ï¼š
- é¸é …Aï¼šåœ¨å¾Œç«¯æ·»åŠ å°æ‡‰æ¥å£
- é¸é …Bï¼šä¿®æ”¹å‰ç«¯é‚è¼¯ï¼Œä½¿ç”¨ç¾æœ‰æ¥å£æ›¿ä»£

**å¦‚æœæ²’æœ‰ä½¿ç”¨**ï¼š
- å¯ä»¥åˆªé™¤é€™äº›æ–¹æ³•ï¼Œæˆ–ä¿ç•™ä½†æ¨™è¨»ç‚º"æœªå¯¦ç¾"

---

## ğŸ“‹ ä¿®å¾©æª¢æŸ¥æ¸…å–®

### å¿…é ˆä¿®å¾©ï¼ˆå„ªå…ˆç´š 1ï¼‰
- [ ] ä¿®å¾© `createSession()` - æ”¹ç‚º `POST /sessions/quick`

### éœ€è¦ç¢ºèªï¼ˆå„ªå…ˆç´š 2ï¼‰
- [ ] æª¢æŸ¥ `submitCase()` æ˜¯å¦è¢«ä½¿ç”¨
- [ ] æª¢æŸ¥ `updateCase()` æ˜¯å¦è¢«ä½¿ç”¨
- [ ] æª¢æŸ¥ `getCaseList()` æ˜¯å¦è¢«ä½¿ç”¨
- [ ] æª¢æŸ¥ `getJudgmentByCaseId()` æ˜¯å¦è¢«ä½¿ç”¨
- [ ] æ ¹æ“šä½¿ç”¨æƒ…æ³æ±ºå®šä¿®å¾©æ–¹æ¡ˆ

---

## âœ… æ­£ç¢ºå°æ¥çš„æ¥å£ï¼ˆ26å€‹ï¼‰

### èªè­‰æ¨¡å¡Šï¼ˆ6å€‹ï¼‰
- âœ… POST /auth/register
- âœ… POST /auth/login
- âœ… POST /auth/send-verification-code
- âœ… POST /auth/verify-email
- âœ… POST /auth/reset-password
- âœ… POST /auth/reset-password-confirm

### æ¡ˆä»¶æ¨¡å¡Šï¼ˆ5å€‹ï¼‰
- âœ… POST /cases/quick
- âœ… POST /cases
- âœ… GET /cases/:id
- âœ… GET /cases/by-session
- âœ… POST /cases/:id/evidence

### åˆ¤æ±ºæ¨¡å¡Šï¼ˆ3å€‹ï¼‰
- âœ… POST /judgments/generate/:id
- âœ… GET /judgments/:id
- âœ… POST /judgments/:id/accept

### å’Œå¥½æ–¹æ¡ˆæ¨¡å¡Šï¼ˆ3å€‹ï¼‰
- âœ… POST /judgments/:id/reconciliation-plans
- âœ… GET /judgments/:id/reconciliation-plans
- âœ… POST /reconciliation-plans/:id/select

### åŸ·è¡Œæ¨¡å¡Šï¼ˆ3å€‹ï¼‰
- âœ… POST /execution/confirm
- âœ… POST /execution/checkin
- âœ… GET /execution/status

### é…å°æ¨¡å¡Šï¼ˆ3å€‹ï¼‰
- âœ… POST /pairing/create
- âœ… POST /pairing/join
- âœ… GET /pairing/status

### ç”¨æˆ¶æ¨¡å¡Šï¼ˆ2å€‹ï¼‰
- âœ… GET /user/profile
- âœ… PUT /user/profile

### å¥åº·æª¢æŸ¥ï¼ˆ3å€‹ï¼‰
- âœ… GET /health
- âœ… GET /health/ready
- âœ… GET /health/live

---

## ğŸ“ ç¸½çµ

### æª¢æŸ¥çµæœ
- âœ… **26å€‹æ¥å£æ­£ç¢ºå°æ¥**
- âš ï¸ **3å€‹å•é¡Œéœ€è¦ä¿®å¾©**
  - 1å€‹åš´é‡å•é¡Œï¼ˆSessionå‰µå»ºï¼ŒP0åŠŸèƒ½ï¼‰
  - 2å€‹ä¸­ç­‰å•é¡Œï¼ˆæ¡ˆä»¶ç›¸é—œæ¥å£ï¼Œéœ€è¦ç¢ºèªä½¿ç”¨æƒ…æ³ï¼‰

### å»ºè­°è¡Œå‹•
1. **ç«‹å³ä¿®å¾©**ï¼šSessionå‰µå»ºæ¥å£ï¼ˆå½±éŸ¿å¿«é€Ÿé«”é©—æ¨¡å¼ï¼‰
2. **æª¢æŸ¥ç¢ºèª**ï¼šæ¡ˆä»¶ç›¸é—œæ¥å£çš„ä½¿ç”¨æƒ…æ³
3. **æ ¹æ“šç¢ºèªçµæœ**ï¼šæ±ºå®šæ˜¯åˆªé™¤é‚„æ˜¯æ·»åŠ å¾Œç«¯æ¥å£

---

**æœ€å¾Œæ›´æ–°**ï¼š2024å¹´12æœˆ

